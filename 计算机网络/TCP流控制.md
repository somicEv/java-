### TCP流控制
---
当接收端无法及时处理发送端发送过来的大量数据时，会将这些数据放入接收端的缓存区中；
当缓存区存满后，发送端继续发送数据的话，接收端只好将发送的数据丢弃，这样就可能触发重发机制，导致网络资源的浪费。

为了避免上述情况的出现，TCP提供了流控制机制。

TCP在首部字段中提供窗口大小字段，接收端可以使用这个字段在进行应答时将自身缓存剩余大小发送给发送端，发送端接收后，就可以调整发送数据的大小。

如果接收端缓存区大小为0时则停止接收数据，等到处理完当前缓存中的数据后，会向发送端发送缓存更新通知，通知可以继续发送数据。

如果更新通知在发送过程中出现丢包，则无法通知发送端。
为应对这种情况，发送端会时不时发送窗口探测包，包内只有一个字节，用来表示当前窗口大小，来判断是否可以继续发送数据。

### 高速重发机制
---
![高速重发机制](../image/高速重传.png)
主要有两种情况：
1、接收端发送的应答丢失：出现这种情况时，会直接发送下一段来进行弥补。

2、发送端报文丢失：这时接收端会连续发送确认应答，接收端接收到相同的连续应答，会对丢失的这段报文进行重发。

### TCP拥塞控制
---
![拥塞控制](../image/拥塞控制.png)
如果网络出现拥塞，分组将会丢失，此时发送方会继续重传，从而导致网络拥塞程度更高。因此当出现拥塞时，应当控制发送方的速率。这一点和流量控制很像，但是出发点不同。流量控制是为了让接收方能来得及接收，而拥塞控制是为了降低整个网络的拥塞程度。

主要有两种手段：慢开始、拥塞避免

在TCP开始时执行慢开始，将窗口大小设置为一个较小的值，随着时间的增加，窗口大小逐渐增加，这时设置一个阀值，当窗口大小超过阀值时，执行拥塞避免，每次窗口增加的值减小。

如果出现超时现象则窗口大小设置为阀值的一半，并重新执行慢开始。